<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>C67 | Roblox Hub</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>C67 | Roblox Top Games</h1>
  <div id="games">Loading...</div>
  <button onclick="loadGames()">Refresh Games</button>

  <script>
    async function loadGames() {
      const container = document.getElementById('games');
      container.innerHTML = 'Loading...';

      try {
        const response = await fetch('/api/games'); // serverless API
        const data = await response.json();

        if(!data.success){
          container.innerHTML = 'Failed to fetch games.';
          return;
        }

        container.innerHTML = '';
        data.games.forEach(game => {
          const card = document.createElement('div');
          card.className = 'game-card';
          card.innerHTML = `
            <img src="${game.thumbnail}" alt="${game.name}">
            <div class="content">
              <h3>${game.name}</h3>
              <p>Active: ${game.activePlayers.toLocaleString()}</p>
              <a href="https://www.roblox.com/games/${game.gameId}" target="_blank">
                <button>Play Now</button>
              </a>
            </div>`;
          container.appendChild(card);
        });

      } catch(err){
        container.innerHTML = 'Error fetching games.';
        console.error(err);
      }
    }

    loadGames(); // load on page load
  </script>
</body>
</html>
